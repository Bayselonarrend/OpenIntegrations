[target.x86_64-unknown-linux-gnu.env]
passthrough = [
    "OPENSSL_DIR=/usr",               # Корневой каталог OpenSSL
    "OPENSSL_LIB_DIR=/usr/lib/x86_64-linux-gnu",  # Каталог с библиотеками
    "OPENSSL_INCLUDE_DIR=/usr/include",          # Каталог с заголовочными файлами
]

[target.x86_64-unknown-linux-gnu]
pre-build = [
    "export DEBIAN_FRONTEND=noninteractive",
    "apt-get update",
    "apt-get install -y build-essential pkg-config libssl-dev",  # Устанавливаем OpenSSL
]
image = "ubuntu:22.04"

[target.i686-unknown-linux-gnu.env]
passthrough = [
    "OPENSSL_DIR=/usr",               # Корневой каталог OpenSSL
    "OPENSSL_LIB_DIR=/usr/lib/i386-linux-gnu",  # Каталог с библиотеками
    "OPENSSL_INCLUDE_DIR=/usr/include",          # Каталог с заголовочными файлами
]

[target.i686-unknown-linux-gnu]
pre-build = [
    "export DEBIAN_FRONTEND=noninteractive",
    "dpkg --add-architecture i386",  # Добавляем поддержку 32-битных библиотек
    "apt-get update",
    "apt-get install -y build-essential pkg-config libssl-dev:i386",  # Устанавливаем 32-битные OpenSSL
    "apt-get install -y gcc-multilib g++-multilib",                   # Устанавливаем мультиархитектурные компиляторы
]
image = "ubuntu:22.04"