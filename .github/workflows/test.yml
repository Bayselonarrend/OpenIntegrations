# This is a basic workflow to help you get started with Actions

name: Основная обработка OInt (OneScript)

# Controls when the workflow will run
on:
  workflow_dispatch:

jobs:

  Convert:
    runs-on: ubuntu-latest
    permissions:
        contents: write
     
    steps:
    
      - uses: actions/checkout@v2             
      - uses: otymko/setup-onescript@v1.4
        with:
          version: 1.9.0 

      - name: Выполнить скрипт преобразования OPI -> OInt
        run: oscript ./.github/workflows/convert.os

      - uses: stefanzweifel/git-auto-commit-action@v5 

  Decode:
    runs-on: ubuntu-latest
    needs: Convert
    steps:
    
      - uses: actions/checkout@v2 
      
      - name: Расшифровать тестовые данные
        run: gpg --quiet --batch --yes --decrypt --passphrase="$ENC_JSON" --output ./data.json ./data.json.gpg        
        env:
          ENC_JSON: ${{ secrets.ENC_JSON }}
      - name: Записать артефакт
        uses: actions/upload-artifact@v4
        with:
          name: test_data
          path: data.json

  Testing-Telegram:
    runs-on: ubuntu-latest
    needs: Decode
    steps:

      - uses: actions/checkout@v2 
      - uses: otymko/setup-onescript@v1.4
        with:
          version: 1.9.0 
          
      - name: Скачать артефакт с тестовой информацией
        uses: actions/download-artifact@v4
        with:
          name: test_data
          
      - name: Установить asserts и 1testrunner
        run: |
          opm install asserts
          opm install 1testrunner

      - name: Выполнить Телеграм_ПолучитьИнформациюБота
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ПолучитьИнформациюБота"
      - name: Выполнить Телеграм_ПолучитьОбновления
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ПолучитьОбновления"
      - name: Выполнить Телеграм_УстановитьWebhook
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_УстановитьWebhook"
      - name: Выполнить Телеграм_УдалитьWebhook
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_УдалитьWebhook"
      - name: Выполнить Телеграм_ОтправитьТекстовоеСообщение
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ОтправитьТекстовоеСообщение"
      - name: Выполнить Телеграм_ОтправитьКартинку
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ОтправитьКартинку"
      - name: Выполнить Телеграм_ОтправитьВидео
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ОтправитьВидео"
      - name: Выполнить Телеграм_ОтправитьАудио
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ОтправитьАудио"
      - name: Выполнить Телеграм_ОтправитьДокумент
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ОтправитьДокумент"
      - name: Выполнить Телеграм_ОтправитьГифку
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ОтправитьГифку"
      - name: Выполнить Телеграм_ОтправитьМедиагруппу
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ОтправитьМедиагруппу"
      - name: Выполнить Телеграм_ОтправитьМестоположение
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ОтправитьМестоположение"
      - name: Выполнить Телеграм_ОтправитьКонтакт
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ОтправитьКонтакт"
      - name: Выполнить Телеграм_ОтправитьОпрос
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ОтправитьОпрос"
      - name: Выполнить Телеграм_ПереслатьСообщение
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ПереслатьСообщение"
      - name: Выполнить Телеграм_БанРазбан
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_БанРазбан"
      - name: Выполнить Телеграм_СоздатьСсылкуПриглашение
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_СоздатьСсылкуПриглашение"
      - name: Выполнить Телеграм_ЗакрепитьОткрепитьСообщение
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ЗакрепитьОткрепитьСообщение"
      - name: Выполнить Телеграм_ПолучитьСписокАватаровФорума
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ПолучитьСписокАватаровФорума"
      - name: Выполнить Телеграм_СоздатьУдалитьТемуФорума
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_СоздатьУдалитьТемуФорума"
      - name: Выполнить Телеграм_ОткрытьЗакрытьГлавнуюТему
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ОткрытьЗакрытьГлавнуюТему"
      - name: Выполнить Телеграм_ИзменитьИмяГлавнойТемы
        run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Телеграм_ИзменитьИмяГлавнойТемы"

  Testing-VK:
      runs-on: ubuntu-latest
      needs: Decode
      steps:
  
        - uses: actions/checkout@v2 
        - uses: otymko/setup-onescript@v1.4
          with:
            version: 1.9.0 
            
        - name: Скачать артефакт с тестовой информацией
          uses: actions/download-artifact@v4
          with:
            name: test_data
            
        - name: Установить asserts и 1testrunner
          run: |
            opm install asserts
            opm install 1testrunner
  
        - name: Выполнить ВК_СоздатьСсылкуТокена
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_СоздатьСсылкуТокена"
        - name: Выполнить ВК_СоздатьУдалитьПост
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_СоздатьУдалитьПост"
        - name: Выполнить ВК_СоздатьОпрос
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_СоздатьОпрос"
        - name: Выполнить ВК_СоздатьИсторию
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_СоздатьИсторию"
        - name: Выполнить ВК_МетодыОбсуждений
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_МетодыОбсуждений"
        - name: Выполнить ВК_ЛайкРепостКоммент
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_ЛайкРепостКоммент"
        - name: Выполнить ВК_ПолучитьСтатистику
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_ПолучитьСтатистику"
        - name: Выполнить ВК_ПолучитьСтатистикуПостов
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_ПолучитьСтатистикуПостов"
        - name: Выполнить ВК_СоздатьРекламнуюКампанию
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_СоздатьРекламнуюКампанию"
        - name: Выполнить ВК_ОтправитьСообщение
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_ОтправитьСообщение"
        - name: Выполнить ВК_ПолучитьКатегорииТоваров
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_ПолучитьКатегорииТоваров"
        - name: Выполнить ВК_СоздатьТоварПодборку
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_СоздатьТоварПодборку"
        - name: Выполнить ВК_СоздатьТоварСоСвойствами
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_СоздатьТоварСоСвойствами"
        - name: Выполнить ВК_ПолучитьСписокТоваров
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_ПолучитьСписокТоваров"
        - name: Выполнить ВК_ПолучитьСписокПодборок
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_ПолучитьСписокПодборок"
        - name: Выполнить ВК_ПолучитьСписокСвойств
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_ПолучитьСписокСвойств"
        - name: Выполнить ВК_ПолучитьСписокСвойств
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_ПолучитьСписокЗаказов"
        - name: Выполнить ВК_СохранитьУдалитьКартинку
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ВК_СохранитьУдалитьКартинку"

  Testing-YandexDisk:
        runs-on: ubuntu-latest
        needs: Decode
        steps:
    
          - uses: actions/checkout@v2 
          - uses: otymko/setup-onescript@v1.4
            with:
              version: 1.9.0 
              
          - name: Скачать артефакт с тестовой информацией
            uses: actions/download-artifact@v4
            with:
              name: test_data
              
          - name: Установить asserts и 1testrunner
            run: |
              opm install asserts
              opm install 1testrunner
    
          - name: Выполнить ЯДиск_ПолучитьИнформациюОДиске
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ЯДиск_ПолучитьИнформациюОДиске"
          - name: Выполнить ЯДиск_СоздатьПапку
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ЯДиск_СоздатьПапку"
          - name: Выполнить ЯДиск_ЗагрузитьПоАдресуПолучитьОбъект
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ЯДиск_ЗагрузитьПоАдресуПолучитьОбъект"
          - name: Выполнить ЯДиск_ЗагрузитьУдалитьФайл
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ЯДиск_ЗагрузитьУдалитьФайл"
          - name: Выполнить ЯДиск_СоздатьКопиюОбъекта
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ЯДиск_СоздатьКопиюОбъекта"
          - name: Выполнить ЯДиск_ПолучитьСсылкуНаСкачивание
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ЯДиск_ПолучитьСсылкуНаСкачивание"
          - name: Выполнить ЯДиск_ПолучитьСписокФайлов
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ЯДиск_ПолучитьСписокФайлов"
          - name: Выполнить ЯДиск_ПереместитьОбъект
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ЯДиск_ПереместитьОбъект"
          - name: Выполнить ЯДиск_ДействияПубличныхОбъектов
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ЯДиск_ДействияПубличныхОбъектов"
          - name: Выполнить ЯДиск_ПолучитьСписокОпубликованных
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ЯДиск_ПолучитьСписокОпубликованных"

  Testing-Viber:
        runs-on: ubuntu-latest
        needs: Decode
        steps:
    
          - uses: actions/checkout@v2 
          - uses: otymko/setup-onescript@v1.4
            with:
              version: 1.9.0 
              
          - name: Скачать артефакт с тестовой информацией
            uses: actions/download-artifact@v4
            with:
              name: test_data
              
          - name: Установить asserts и 1testrunner
            run: |
              opm install asserts
              opm install 1testrunner
    
          - name: Выполнить Вайбер_ПолучитьИнформациюОКанале
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Вайбер_ПолучитьИнформациюОКанале"
          - name: Выполнить Вайбер_ПолучитьДанныеПользователя
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Вайбер_ПолучитьДанныеПользователя"
          - name: Выполнить Вайбер_ПолучитьОнлайнПользователей
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Вайбер_ПолучитьОнлайнПользователей"
          - name: Выполнить Вайбер_ОтправитьТекстовоеСообщение
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Вайбер_ОтправитьТекстовоеСообщение"
          - name: Выполнить Вайбер_ОтправитьКартинку
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Вайбер_ОтправитьКартинку"
          - name: Выполнить Вайбер_ОтправитьФайл
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Вайбер_ОтправитьФайл"
          - name: Выполнить Вайбер_ОтправитьКонтакт
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Вайбер_ОтправитьКонтакт"
          - name: Выполнить Вайбер_ОтправитьЛокацию
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Вайбер_ОтправитьЛокацию"
          - name: Выполнить Вайбер_ОтправитьСсылку
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Вайбер_ОтправитьСсылку"

  Testing-GoogleWorkspace:
        runs-on: ubuntu-latest
        needs: Decode
        steps:
    
          - uses: actions/checkout@v2 
          - uses: otymko/setup-onescript@v1.4
            with:
              version: 1.9.0 
              
          - name: Скачать артефакт с тестовой информацией
            uses: actions/download-artifact@v4
            with:
              name: test_data
              
          - name: Установить asserts и 1testrunner
            run: |
              opm install asserts
              opm install 1testrunner
    
          - name: Выполнить ГВ_ПолучитьСсылкуАвторизации
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ГВ_ПолучитьСсылкуАвторизации"
          - name: Выполнить ГВ_ПолучитьТокен
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ГВ_ПолучитьТокен"
          - name: Выполнить ГВ_ОбновитьТокен
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ГВ_ОбновитьТокен"

          - name: Записать артефакт
            uses: actions/upload-artifact@v4
            with:
              name: test_data_google
              path: data.json

  Testing-GoogleCalendar:
        runs-on: ubuntu-latest
        needs: Testing-GoogleWorkspace
        steps:
    
          - uses: actions/checkout@v2 
          - uses: otymko/setup-onescript@v1.4
            with:
              version: 1.9.0 
              
          - name: Скачать артефакт с тестовой информацией
            uses: actions/download-artifact@v4
            with:
              name: test_data_google
              
          - name: Установить asserts и 1testrunner
            run: |
              opm install asserts
              opm install 1testrunner
    
          - name: Выполнить ГК_ПолучитьСписокКалендарей
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ГК_ПолучитьСписокКалендарей"
          - name: Выполнить ГК_СоздатьУдалитьКалендарь
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ГК_СоздатьУдалитьКалендарь"
          - name: Выполнить ГК_СоздатьУдалитьСобытие
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ГК_СоздатьУдалитьСобытие"
          - name: Выполнить ГК_ПолучитьСписокСобытий
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ГК_ПолучитьСписокСобытий"

  Testing-GoogleDrive:
        runs-on: ubuntu-latest
        needs: Testing-GoogleWorkspace
        steps:
    
          - uses: actions/checkout@v2 
          - uses: otymko/setup-onescript@v1.4
            with:
              version: 1.9.0 
              
          - name: Скачать артефакт с тестовой информацией
            uses: actions/download-artifact@v4
            with:
              name: test_data_google
              
          - name: Установить asserts и 1testrunner
            run: |
              opm install asserts
              opm install 1testrunner
    
          - name: Выполнить ГД_ПолучитьСписокКаталогов
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ГД_ПолучитьСписокКаталогов"
          - name: Выполнить ГД_ЗагрузитьУдалитьФайл
            run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "ГД_ЗагрузитьУдалитьФайл"
                      
  Testing-Twitter:
      runs-on: ubuntu-latest
      needs: Decode
      steps:
  
        - uses: actions/checkout@v2 
        - uses: otymko/setup-onescript@v1.4
          with:
            version: 1.9.0 
            
        - name: Скачать артефакт с тестовой информацией
          uses: actions/download-artifact@v4
          with:
            name: test_data
            
        - name: Установить asserts и 1testrunner
          run: |
            opm install asserts
            opm install 1testrunner
  
        - name: Выполнить Твиттер_ПолучитьСсылкуАвторизации
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Твиттер_ПолучитьСсылкуАвторизации"
        - name: Выполнить Твиттер_ОбновитьТокен
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Твиттер_ОбновитьТокен"
        - name: Выполнить Твиттер_СоздатьТекстовыйТвит
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Твиттер_СоздатьТекстовыйТвит"
        - name: Выполнить Твиттер_СоздатьТвитСКартинкой
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Твиттер_СоздатьТвитСКартинкой"
        - name: Выполнить Твиттер_СоздатьТвитСВидео
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Твиттер_СоздатьТвитСВидео"
        - name: Выполнить Твиттер_СоздатьТвитСГиф
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Твиттер_СоздатьТвитСГиф"
        - name: Выполнить Твиттер_СоздатьТвитСОпросом
          run: oscript /home/runner/.local/share/ovm/current/lib/1testrunner/src/main.os -run ./OInt/tests/Modules/internal/OPI_Тесты.os "Твиттер_СоздатьТвитСОпросом"
            
        - name: Записать артефакт
          uses: actions/upload-artifact@v4
          with:
            name: test_data_new
            path: data.json

  Encode:
      runs-on: ubuntu-latest
      needs: Testing-Twitter
      if: ${{ cancelled() }} == false
      permissions:
        contents: write
        
      steps:

      - uses: actions/checkout@v2 
      
      - name: Скачать артефакт с тестовой информацией
        uses: actions/download-artifact@v4
        with:
          name: test_data_new
          
      - name: Зашифровать данные обратно
        continue-on-error: false
        
        run: |
          rm -f ./data.json.gpg
          gpg --batch --symmetric --cipher-algo AES256 --passphrase="$ENC_JSON" data.json
          rm -f ./data.json
        env:
          ENC_JSON: ${{ secrets.ENC_JSON }}
          
      - uses: stefanzweifel/git-auto-commit-action@v5   


      
