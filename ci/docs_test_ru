pipeline {
    agent any
    stages {
        stage('Deploy') {
            steps {
                    
                    bat encoding: 'UTF-8', script:'chcp 65001 & xcopy "docs/ru/md" "docs/docusaurus/docs" /s /e /i /y'
                    bat encoding: 'UTF-8', script:'chcp 65001 & cd docs/docusaurus & npm install'
                    bat encoding: 'UTF-8', script:'chcp 65001 & cd docs/docusaurus & "C:/Program Files (x86)/Yarn/bin/yarn" build'
                    bat encoding: 'UTF-8', script:'chcp 65001 & cd docs/docusaurus/build & neocel --t=%GPGKEY% --yes'
                    withCredentials([string(credentialsId: 'neocities-test', variable: 'TOKEN')]) {
                     }
            }
        }
    }
}