---
sidebar_position: 3
description: Получить ответ в контексте и другие функции для работы с Ollama в Открытом пакете интеграций - бесплатной open-source библиотеке интеграций для 1С:Предприятие 8, OneScript и CLI
keywords: [1C, 1С, 1С:Предприятие, 1С:Предприятие 8.3, API, Интеграция, Сервисы, Обмен, OneScript, CLI, Ollama]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Получить ответ в контексте
 Получает очередной ответ от модели в соответствии с историей сообщений



`Функция ПолучитьОтветВКонтексте(Знач URL, Знач Модель, Знач Сообщения, Знач ДопПараметры = "", Знач ДопЗаголовки = "") Экспорт`

  | Параметр | CLI опция | Тип | Обяз. | Назначение |
  |-|-|-|-|-|
  | URL | --url | Строка | &#x2714; | URL сервера Ollama |
  | Модель | --model | Строка | &#x2714; | Имя модели |
  | Сообщения | --msgs | Массив Из Структура | &#x2714; | История сообщений. См. ПолучитьСтруктуруСообщенияКонтекста |
  | ДопПараметры | --options | Структура Из КлючИЗначение | &#x2716; | Доп. параметры. См. ПолучитьСтруктуруПараметровЗапроса |
  | ДопЗаголовки | --headers | Соответствие Из КлючИЗначение | &#x2716; | Доп заголовки запроса, если необходимо |

  
  Возвращаемое значение:   Соответствие Из КлючИЗначение - Результат обработки

<br/>

:::tip
Метод в документации API: [Generate a chat completion](https://github.com/ollama/ollama/blob/main/docs/api.md#generate-a-chat-completion)
:::
<br/>


```bsl title="Пример использования для 1С:Предприятие/OneScript"
    URL   = "https://hut.openintegrations.dev/ollama";
    Токен = "12We34..."; // Авторизация - не часть API Ollama

    ДопЗаголовки = Новый Соответствие;
    ДопЗаголовки.Вставить("Authorization", СтрШаблон("Bearer %1", Токен));

    Модель = "tinyllama";

    МассивСообщений = Новый Массив;

    Вопрос1 = OPI_Ollama.ПолучитьСтруктуруСообщенияКонтекста("user", "What is 1C:Enterprise?");
    Вопрос2 = OPI_Ollama.ПолучитьСтруктуруСообщенияКонтекста("user", "When the first version was released?"); // Вопрос без конкретики

    // Добавляем первый вопрос в контекст
    МассивСообщений.Добавить(Вопрос1);

    Ответ1 = OPI_Ollama.ПолучитьОтветВКонтексте(URL, Модель, МассивСообщений, , ДопЗаголовки);

    МассивСообщений.Добавить(Ответ1["message"]); // Добавляем ответ на первый вопрос в контекст
    МассивСообщений.Добавить(Вопрос2);           // Добавляем второй вопрос в контекст

    Ответ2 = OPI_Ollama.ПолучитьОтветВКонтексте(URL, Модель, МассивСообщений, , ДопЗаголовки);

    МассивСообщений.Добавить(Ответ2["message"]);

    // ...
```
    

 <Tabs>
  
    <TabItem value="bash" label="Bash" default>
        ```bash
            # JSON данные также могут быть переданы как путь к файлу .json
            
            oint ollama ПолучитьОтветВКонтексте \
              --url "https://hut.openintegrations.dev/ollama" \
              --model "tinyllama" \
              --msgs "[{'role':'user','content':'Hello!'}]" \
              --options "{'options':{'seed':'555','temperature':'10'}}" \
              --headers "{'Authorization':'***'}"
        ```
    </TabItem>
  
    <TabItem value="bat" label="CMD/Bat" default>
        ```batch
            :: JSON данные также могут быть переданы как путь к файлу .json
            
            oint ollama ПолучитьОтветВКонтексте ^
              --url "https://hut.openintegrations.dev/ollama" ^
              --model "tinyllama" ^
              --msgs "[{'role':'user','content':'Hello!'}]" ^
              --options "{'options':{'seed':'555','temperature':'10'}}" ^
              --headers "{'Authorization':'***'}"
        ```
    </TabItem>
</Tabs>


```json title="Результат"
{
 "model": "tinyllama",
 "created_at": "2025-10-10T10:49:55.788575894Z",
 "message": {
  "role": "assistant",
  "content": "The first version of 1C:Enterprise that was released in 2000 was a commercial software product developed by one of the largest Russian software companies, 1C. While there have been minor updates and improvements throughout its life span, it has generally remained relatively stable over time. The latest major release of 1C:Enterprise was version 16.5, released in December 2019. As for when the first version was released, that depends on the specific product being discussed. For example, if we were referring to a previous version of Microsoft's Windows operating system, that would be something like Windows XP, which was released in April 2004. Similarly, if we were talking about a different type of software product, such as a program from a well-known publisher like Adobe or Microsoft, the earliest version would be one like Photoshop or Word, which were first released in their respective years. In general, it's best to check the official website or documentation for information on specific versions and releases."
 },
 "done_reason": "stop",
 "done": true,
 "total_duration": 41929630744,
 "load_duration": 16543441,
 "prompt_eval_count": 491,
 "prompt_eval_duration": 16194148102,
 "eval_count": 220,
 "eval_duration": 25709889299
}
```
