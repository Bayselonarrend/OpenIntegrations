---
sidebar_position: 3
description: Получить ответ в контексте и другие функции для работы с Ollama в Открытом пакете интеграций - бесплатной open-source библиотеке интеграций для 1С:Предприятие 8, OneScript и CLI
keywords: [1C, 1С, 1С:Предприятие, 1С:Предприятие 8.3, API, Интеграция, Сервисы, Обмен, OneScript, CLI, Ollama]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Получить ответ в контексте
 Получает очередной ответ от модели в соответствии с историей сообщений



`Функция ПолучитьОтветВКонтексте(Знач URL, Знач Модель, Знач Сообщения, Знач ДопПараметры = "", Знач ДопЗаголовки = "") Экспорт`

  | Параметр | CLI опция | Тип | Обяз. | Назначение |
  |-|-|-|-|-|
  | URL | --url | Строка | &#x2714; | URL сервера Ollama |
  | Модель | --model | Строка | &#x2714; | Имя модели |
  | Сообщения | --msgs | Массив Из Структура | &#x2714; | История сообщений. См. ПолучитьСтруктуруСообщенияКонтекста |
  | ДопПараметры | --options | Структура Из КлючИЗначение | &#x2716; | Доп. параметры. См. ПолучитьСтруктуруПараметровЗапроса |
  | ДопЗаголовки | --headers | Соответствие Из КлючИЗначение | &#x2716; | Доп заголовки запроса, если необходимо |

  
  Возвращаемое значение:   Соответствие Из КлючИЗначение - Результат обработки

<br/>

:::tip
Метод в документации API: [Generate a chat completion](https://github.com/ollama/ollama/blob/main/docs/api.md#generate-a-chat-completion)
:::
<br/>



```bsl title="Пример использования для 1С:Предприятие/OneScript"
    URL   = "https://hut.openintegrations.dev/ollama";
    Токен = "12We34..."; // Авторизация - не часть API Ollama

    ДопЗаголовки = Новый Соответствие;
    ДопЗаголовки.Вставить("Authorization", СтрШаблон("Bearer %1", Токен));

    Модель = "tinyllama";

    МассивСообщений = Новый Массив;

    Вопрос1 = OPI_Ollama.ПолучитьСтруктуруСообщенияКонтекста("user", "What is 1C:Enterprise?");
    Вопрос2 = OPI_Ollama.ПолучитьСтруктуруСообщенияКонтекста("user", "When the first version was released?"); // Вопрос без конкретики

    // Добавляем первый вопрос в контекст
    МассивСообщений.Добавить(Вопрос1);

    Ответ1 = OPI_Ollama.ПолучитьОтветВКонтексте(URL, Модель, МассивСообщений, , ДопЗаголовки);

    МассивСообщений.Добавить(Ответ1["message"]); // Добавляем ответ на первый вопрос в контекст
    МассивСообщений.Добавить(Вопрос2);           // Добавляем второй вопрос в контекст

    Ответ2 = OPI_Ollama.ПолучитьОтветВКонтексте(URL, Модель, МассивСообщений, , ДопЗаголовки);

    МассивСообщений.Добавить(Ответ2["message"]);

    // ...
```
    

 <Tabs>
  
    <TabItem value="bash" label="Bash" default>
        ```bash
            # JSON данные также могут быть переданы как путь к файлу .json
            
            oint ollama ПолучитьОтветВКонтексте \
              --url "https://hut.openintegrations.dev/ollama" \
              --model "tinyllama" \
              --msgs "[{'role':'user','content':'What is 1C:Enterprise?'},{'role':'assistant','content':'1C:Enterprise is a software development and management tool developed by Zoho. It is a comprehensive productivity solution that allows businesses to manage projects, tasks, and resources in the enterprise software space. Here are some features of 1C:Enterprise:\n\n1. Centralized Project Management: 1C:Enterprise provides centralized project management functionality, which enables businesses to monitor and manage multiple projects from a single dashboard. It provides comprehensive visibility into project status, timelines, tasks, and resources.\n\n2. Task Management: The software offers task management functionalities that enable users to create, assign, and track tasks across various departments or projects. Tasks can be assigned based on priority and due dates to ensure they are completed on time.\n\n3. Resource Management: 1C:Enterprise provides a comprehensive resource management system that enables businesses to manage resources such as people, equipment, and machines. It allows users to create and assign resources based on availability, skill level, and project needs.\n\n4. Reporting and Analytics: The software offers reporting and analytics functionalities that enable users to generate detailed reports and insights into project performance, resource utilization, and team productivity.\n\n5. Integration with Other Products: 1C:Enterprise integrates seamlessly with other Zoho products, such as Zoho Desk, Zoho Books, and Zoho Analytics. This allows users to access a comprehensive range of tools in one centralized platform.\n\n6. Customizable User Interface: The software provides customizable user interfaces that enable businesses to tailor the interface to their specific needs and preferences. It also offers a wide range of customization options, including color schemes, icons, and fonts.\n\nOverall, 1C:Enterprise is an all-inclusive solution designed to help businesses manage projects, tasks, resources, reports, analytics, and more efficiently.'},{'role':'user','content':'When the first version was released?'}]" \
              --headers "{'Authorization':'***'}"
        ```
    </TabItem>
  
    <TabItem value="bat" label="CMD/Bat" default>
        ```batch
            :: JSON данные также могут быть переданы как путь к файлу .json
            
            oint ollama ПолучитьОтветВКонтексте ^
              --url "https://hut.openintegrations.dev/ollama" ^
              --model "tinyllama" ^
              --msgs "[{'role':'user','content':'What is 1C:Enterprise?'},{'role':'assistant','content':'1C:Enterprise is a software development and management tool developed by Zoho. It is a comprehensive productivity solution that allows businesses to manage projects, tasks, and resources in the enterprise software space. Here are some features of 1C:Enterprise:\n\n1. Centralized Project Management: 1C:Enterprise provides centralized project management functionality, which enables businesses to monitor and manage multiple projects from a single dashboard. It provides comprehensive visibility into project status, timelines, tasks, and resources.\n\n2. Task Management: The software offers task management functionalities that enable users to create, assign, and track tasks across various departments or projects. Tasks can be assigned based on priority and due dates to ensure they are completed on time.\n\n3. Resource Management: 1C:Enterprise provides a comprehensive resource management system that enables businesses to manage resources such as people, equipment, and machines. It allows users to create and assign resources based on availability, skill level, and project needs.\n\n4. Reporting and Analytics: The software offers reporting and analytics functionalities that enable users to generate detailed reports and insights into project performance, resource utilization, and team productivity.\n\n5. Integration with Other Products: 1C:Enterprise integrates seamlessly with other Zoho products, such as Zoho Desk, Zoho Books, and Zoho Analytics. This allows users to access a comprehensive range of tools in one centralized platform.\n\n6. Customizable User Interface: The software provides customizable user interfaces that enable businesses to tailor the interface to their specific needs and preferences. It also offers a wide range of customization options, including color schemes, icons, and fonts.\n\nOverall, 1C:Enterprise is an all-inclusive solution designed to help businesses manage projects, tasks, resources, reports, analytics, and more efficiently.'},{'role':'user','content':'When the first version was released?'}]" ^
              --headers "{'Authorization':'***'}"
        ```
    </TabItem>
</Tabs>


```json title="Результат"
{
 "model": "tinyllama",
 "created_at": "2025-04-14T20:16:54.5071968Z",
 "message": {
  "role": "assistant",
  "content": "The first version of 1C:Enterprise was released in 2001. However, the latest version (version 21) was released in 2021. The company has continued to make minor updates and upgrades to the software over time, including bug fixes and improvements."
 },
 "done_reason": "stop",
 "done": true,
 "total_duration": 21319004300,
 "load_duration": 16999000,
 "prompt_eval_count": 172,
 "prompt_eval_duration": 11457001500,
 "eval_count": 64,
 "eval_duration": 9843003800
}
```
