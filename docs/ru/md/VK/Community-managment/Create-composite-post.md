---
sidebar_position: 2
---

# Создать составной пост
 Создает пост на основе массива идетификаторов объектов (картинок, видео и др.)


*Функция СоздатьСоставнойПост(Знач Текст, Знач Объекты, Знач Реклама = Ложь, Знач СсылкаПодЗаписью = "", Знач Параметры = "") Экспорт*

  | Параметр | CLI опция | Тип | Назначение |
  |-|-|-|-|
  | Текст | --text | Строка | Текст поста |
  | Объекты | --objects | Массив из Строка | Массив идентификаторов вида photo123_123 |
  | Реклама | --ad | Булево | Признак ""Это реклама"" |
  | СсылкаПодЗаписью | --url | Строка | Ссылка (URL) под записью |
  | Параметры | --auth | Структура из Строка | JSON авторизации или путь к .json |

  
  Возвращаемое значение:   Соответствие Из КлючИЗначение - сериализованный JSON ответа от VK

```bsl title="Пример кода"
	
  Параметры = ПолучитьПараметрыВК();
  Текст     = "Пост из автотеста";
  URL       = "https://github.com/Bayselonarrend/OpenIntegrations";
  
  Картинка = "https://openintegrations.dev/test_data/picture.jpg"; // URL, Путь или Двоичные данные
  Видео    = "https://openintegrations.dev/test_data/video.mp4";   // URL, Путь или Двоичные данные
  
  ИВФ = ПолучитьИмяВременногоФайла("png");
  КопироватьФайл(Картинка, ИВФ);
  
  ЗагрузкаКартинки = OPI_VK.ЗагрузитьФотоНаСервер(ИВФ, Параметры)["response"][0];
  ЗагрузкаВидео    = OPI_VK.ЗагрузитьВидеоНаСервер(Видео, "Новое видео", , , Параметры);
  
  ВладелецКартинки = OPI_Инструменты.ЧислоВСтроку(ЗагрузкаКартинки["owner_id"]);
  ВладелецВидео    = OPI_Инструменты.ЧислоВСтроку(ЗагрузкаВидео["owner_id"]);
  
  IDКартинки       = OPI_Инструменты.ЧислоВСтроку(ЗагрузкаКартинки["id"]);
  IDВидео          = OPI_Инструменты.ЧислоВСтроку(ЗагрузкаВидео["video_id"]);
  
  МассивВложений = Новый Массив;
  МассивВложений.Добавить("photo" + ВладелецКартинки + "_" + IDКартинки);
  МассивВложений.Добавить("video" + ВладелецВидео + "_" + IDВидео);
  
  Результат = OPI_VK.СоздатьСоставнойПост(Текст, МассивВложений, Ложь, URL, Параметры);
	
```

```sh title="Пример команды CLI"
    
      oint vk СоздатьСоставнойПост --text %text% --objects %objects% --ad %ad% --url %url% --auth %auth%


```


```json title="Результат"

{
 "response": {
  "post_id": 2126
 }
}

```
