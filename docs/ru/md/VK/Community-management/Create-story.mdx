---
sidebar_position: 7
description: Создать историю и другие функции для работы с VK в Открытом пакете интеграций - бесплатной open-source библиотеке интеграций для 1С:Предприятие 8, OneScript и CLI
keywords: [1C, 1С, 1С:Предприятие, 1С:Предприятие 8.3, API, Интеграция, Сервисы, Обмен, OneScript, CLI, VK]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Создать историю
 Создает историю из картинки



`Функция СоздатьИсторию(Знач Картинка, Знач URL = "", Знач Параметры = "") Экспорт`

  | Параметр | CLI опция | Тип | Обяз. | Назначение |
  |-|-|-|-|-|
  | Картинка | --picture | Строка,ДвоичныеДанные | &#x2714; | Фон истории |
  | URL | --url | Строка | &#x2716; | URL для кнопки под историей |
  | Параметры | --auth | Структура из Строка | &#x2716; | Параметры авторизации. См. [`ПолучитьПараметрыАвторизации`](/docs/VK/Authorization/Get-auth-parameters) |

  
  Возвращаемое значение:   Соответствие Из КлючИЗначение - сериализованный JSON ответа от VK

<br/>

:::tip
Параметры с типом данных Двоичные данные могут принимать также пути к файлам на диске и URL
:::
<br/>


```bsl title="Пример использования для 1С:Предприятие/OneScript"
    Параметры = ПолучитьПараметрыВК();
    URL       = "https://github.com/Bayselonarrend/OpenIntegrations";

    Картинка = "https://hut.openintegrations.dev/test_data/picture.jpg";       // URL, Путь к файлу или Двоичные данные
    ИВФ      = ПолучитьИмяВременногоФайла("png");
    КопироватьФайл(Картинка, ИВФ);
    Картинка = Новый ДвоичныеДанные(ИВФ);

    Результат = OPI_VK.СоздатьИсторию(Картинка, URL, Параметры);
```
    

 <Tabs>
  
    <TabItem value="bash" label="Bash" default>
        ```bash
            # JSON данные также могут быть переданы как путь к файлу .json
            
            oint vk СоздатьИсторию \
              --picture "/tmp/5okofv2u.54f.png" \
              --auth "{'access_token':'***','owner_id':'-218861756','app_id':'51694790','group_id':'218861756'}"
        ```
    </TabItem>
  
    <TabItem value="bat" label="CMD/Bat" default>
        ```batch
            :: JSON данные также могут быть переданы как путь к файлу .json
            
            oint vk СоздатьИсторию ^
              --picture "/tmp/5okofv2u.54f.png" ^
              --auth "{'access_token':'***','owner_id':'-218861756','app_id':'51694790','group_id':'218861756'}"
        ```
    </TabItem>
</Tabs>


```json title="Результат"
{
 "response": {
  "count": 1,
  "items": [
   {
    "id": 456241234,
    "owner_id": -218861756,
    "access_key": "***",
    "can_comment": 1,
    "can_reply": 1,
    "can_see": 1,
    "can_like": true,
    "can_share": 1,
    "can_hide": 1,
    "date": 1762796662,
    "expires_at": 1762883062,
    "link": {
     "text": "Ещё",
     "url": "https://github.com/Bayselonarrend/OpenIntegrations"
    },
    "photo": {
     "album_id": -81,
     "date": 1762796662,
     "id": 457260596,
     "owner_id": -218861756,
     "sizes": [
      {
       "height": 453,
       "type": "x",
       "width": "***",
       "url": "https://sun56-1.userapi.com/s/v1/ig2/2shwXL3zOMefenMqz9ADn_1I7C4QPjlRDJxYG8KSz75m2wpHV8BFKBgPBZ6ByZ60D00PEZXXK_GfXy-ycAR8hxsN.jpg?size=604x453&quality=95&type=story"
      },
      {
       "height": 605,
       "type": "y",
       "width": "***",
       "url": "https://sun56-1.userapi.com/s/v1/ig2/CxwFZ1rJODki_jSPVpBbFzzOXtXbrcMXAqcPJ-isM2nN7ZfRc_kfatKoA1HSAFFwx3q34A4gFXmf1NXUmypGcxng.jpg?size=807x605&quality=95&type=story"
      },
      {
       "height": 960,
       "type": "z",
       "width": "***",
       "url": "https://sun56-1.userapi.com/s/v1/ig2/2K2Us0RAm6SuVCx1VPB_7UkjmwIeXIWpTT75B3rT-7cL05L-CVQ4nPLkqROFRMrEB5X674otN0v9VD4Ys4t6ypZB.jpg?size=1280x960&quality=95&type=story"
      },
      {
       "height": 1920,
       "type": "w",
       "width": "***",
       "url": "https://sun56-1.userapi.com/s/v1/ig2/OMESsoqRXMYryhUzcwnY9wjRvovKKjjvkohxceArdRBdjt1Pe6Kg_JtDkB5ZpMnZ8s16skMBeZaU34VmMrbNrW41.jpg?size=2560x1920&quality=95&type=story"
      }
     ],
     "text": "",
     "user_id": 100,
     "web_view_token": "***",
     "has_tags": false
    },
    "replies": {
     "count": 0,
     "new": 0
    },
    "track_code": "story_json/eyJvd25lcl9pZCI6LTIxODg2MTc1Niwic3RvcnlfaWQiOjQ1NjI0MTIzNCwidmlld2VyX2lkIjo2NTc4NDY3NTZ9",
    "type": "photo",
    "views": 0,
    "likes_count": 0,
    "reaction_set_id": "reactions",
    "no_sound": false,
    "can_ask": 0,
    "can_ask_anonymous": 0,
    "narratives_count": 0,
    "can_use_in_narrative": true
   }
  ]
 }
}
```
