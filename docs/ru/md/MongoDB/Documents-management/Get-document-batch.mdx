---
sidebar_position: 6
description: Получить пакет документов  и другие функции для работы с MongoDB в Открытом пакете интеграций - бесплатной open-source библиотеке интеграций для 1С:Предприятие 8, OneScript и CLI
keywords: [1C, 1С, 1С:Предприятие, 1С:Предприятие 8.3, API, Интеграция, Сервисы, Обмен, OneScript, CLI, MongoDB]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Получить пакет документов 
 Получает очередной пакет документов курсора



`Функция ПолучитьПакетДокументов(Знач Соединение, Знач Коллекция, Знач IDКурсора, Знач База = Неопределено, Знач РазмерПакета = Неопределено, Знач Ожидание = Неопределено) Экспорт`

  | Параметр | CLI опция | Тип | Обяз. | Назначение |
  |-|-|-|-|-|
  | Соединение | - | Строка, Произвольный | &#x2714; | Соединение или строка подключения |
  | Коллекция | - | Строка | &#x2714; | Имя коллекции |
  | IDКурсора | - | Число | &#x2714; | ID курсора |
  | База | - | Строка | &#x2716; | Имя базы. Текущая база, если не указано |
  | РазмерПакета | - | Число | &#x2716; | Число записей в пакете |
  | Ожидание | - | Число | &#x2716; | Максимальное время блокировки при awaitData (в мс.) |

  
  Возвращаемое значение:   Соответствие Из КлючИЗначение - Результат выполнения операции


:::caution
**NOCLI:** данный метод недоступен для использования в CLI версии
:::
<br/>


```bsl title="Пример использования для 1С:Предприятие/OneScript"
    Адрес  = "127.0.0.1:1234";
    Логин  = "bayselonarrend";
    Пароль = "12we...";
    База   = "main";

    ПараметрыПодключения = Новый Структура("authSource", "admin");
    СтрокаПодключения    = OPI_MongoDB.СформироватьСтрокуПодключения(Адрес, , Логин, Пароль, ПараметрыПодключения);
    Соединение           = OPI_MongoDB.ОткрытьСоединение(СтрокаПодключения);

    Коллекция = "new_collection";

    Фильтр     = Новый Структура("stringField", "Текст");
    Сортировка = Новый Структура("doubleField", -1);
    Параметры  = Новый Структура("limit,batchSize", 2, 1);

    Курсор = OPI_MongoDB.ПолучитьКурсор(Соединение, Коллекция, База, Фильтр, Сортировка, Параметры);

    Если Не Курсор["result"] Тогда
        ВызватьИсключение Курсор["error"];
    КонецЕсли;

    Курсор            = Курсор["data"]["cursor"];
    МассивДокументов  = Курсор["firstBatch"];
    IDКурсора         = Курсор["id"];
    ПродолжатьВыборку = IDКурсора > 0;

    Пока ПродолжатьВыборку Цикл

        Результат = OPI_MongoDB.ПолучитьПакетДокументов(Соединение, Коллекция, IDКурсора, База); // <---

        Если Не Результат["result"] Тогда
            ВызватьИсключение Результат["error"];
        КонецЕсли;

        ПродолжатьВыборку = Результат["data"]["cursor"]["id"] > 0;

        Для Каждого Запись Из Результат["data"]["cursor"]["nextBatch"] Цикл
            МассивДокументов.Добавить(Запись);
        КонецЦикла;

    КонецЦикла;
```
    



```json title="Результат"
{
 "result": true,
 "data": {
  "cursor": {
   "nextBatch": [
    {
     "_id": "695d604baf409f976b172573",
     "stringField": "Текст",
     "intField": 200,
     "doubleField": 123.456,
     "boolField": true,
     "arrayField": [
      "Значение1",
      "Значение2"
     ],
     "docField": {
      "text": "Текст",
      "number": 10
     },
     "dateField": "2026-01-06T22:19:38.878Z",
     "nullField": null
    }
   ],
   "id": 0,
   "ns": "main.new_collection"
  },
  "ok": 1
 }
}
```
