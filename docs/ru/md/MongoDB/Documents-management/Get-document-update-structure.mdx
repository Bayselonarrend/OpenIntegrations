---
sidebar_position: 7
description: Получить структуру обновления документов и другие функции для работы с MongoDB в Открытом пакете интеграций - бесплатной open-source библиотеке интеграций для 1С:Предприятие 8, OneScript и CLI
keywords: [1C, 1С, 1С:Предприятие, 1С:Предприятие 8.3, API, Интеграция, Сервисы, Обмен, OneScript, CLI, MongoDB]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Получить структуру обновления документов
 Формирует структуру данных для обновления документов



`Функция ПолучитьСтруктуруОбновленияДокументов(Знач Фильтр, Знач Данные, Знач ОбновитьВсе = Истина, Знач Вставлять = Ложь, Знач Сопоставление = Неопределено) Экспорт`

  | Параметр | CLI опция | Тип | Обяз. | Назначение |
  |-|-|-|-|-|
  | Фильтр | --query | Структура Из КлючИЗначение | &#x2714; | Фильтр документов |
  | Данные | --data | Структура Из КлючИЗначение | &#x2714; | Новые данные документов для обновления |
  | ОбновитьВсе | --multi | Булево | &#x2716; | Истина > обновляет все документы по фильтру, Ложь > только один |
  | Вставлять | --upsert | Булево | &#x2716; | Вставить новый документ, если ни один документ не был найден |
  | Сопоставление | --cltn | Структура Из КлючИЗначение | &#x2716; | Особые настройки правил сравнения полей при поиске |

  
  Возвращаемое значение:   Структура Из КлючИЗначение - Результат закрытия соединения



```bsl title="Пример использования для 1С:Предприятие/OneScript"
    // __4 = $
    Фильтр = Новый Структура("stringField,doubleField", "Текст", Новый Структура("__4gte, __4lte", 100, 150));
    Данные = Новый Структура( "__4set", Новый Структура("doubleField", 999));

    Результат = OPI_MongoDB.ПолучитьСтруктуруОбновленияДокументов(Фильтр, Данные, Истина, Истина);
```
    

 <Tabs>
  
    <TabItem value="bash" label="Bash" default>
        ```bash
            # JSON данные также могут быть переданы как путь к файлу .json
            
            oint mongodb ПолучитьСтруктуруОбновленияДокументов \
              --query "{'stringField':'Текст','doubleField':{'__4gte':'100','__4lte':'150'}}" \
              --data "{'__4set':{'doubleField':'999'}}" \
              --multi true \
              --upsert true
        ```
    </TabItem>
  
    <TabItem value="bat" label="CMD/Bat" default>
        ```batch
            :: JSON данные также могут быть переданы как путь к файлу .json
            
            oint mongodb ПолучитьСтруктуруОбновленияДокументов ^
              --query "{'stringField':'Текст','doubleField':{'__4gte':'100','__4lte':'150'}}" ^
              --data "{'__4set':{'doubleField':'999'}}" ^
              --multi true ^
              --upsert true
        ```
    </TabItem>
</Tabs>


```json title="Результат"
{
 "q": {
  "stringField": "Текст",
  "doubleField": {
   "__4gte": 100,
   "__4lte": 150
  }
 },
 "u": {
  "__4set": {
   "doubleField": 999
  }
 },
 "multi": true,
 "upsert": true
}
```
