---
id: Viber
sidebar_class_name: Viber
keywords: [1C, 1С, 1С:Предприятие, 1С:Предприятие 8.3, API, Интеграция, Сервисы, Обмен, OneScript, CLI, Viber]
---

<img src={require('../../static/img/APIs/Viber.png').default} width='64px' />

# Viber

Этот раздел посвящен библиотеке для работы с Viber API в 1С:Предприятие, OneScript и CLI. На данной странице описаны все действия, необходимые для полноценного начала работы

:::warning
Начиная с 05.02.2024 данный способ создания ботов более недействителен: Rakuten отменил возможность создавать ботов бесплатно и теперь для работы с API необходимо проходить верификацию по коммерческой модели. Подробнее [тут](https://help.viber.com/hc/en-us/articles/15247629658525-Bot-commercial-model)
:::

:::caution
Методы данной библиотеки не проходят тестирование с 10.01.2025
:::

## Начало работы

У Viber есть два REST API: один для работы с каналами, а второй - для чат-ботов. В обоих случаях основными параметрами служат **Токен** и **IDПользователя**

- Если вам необходимо управлять каналом:
	1. Зайдите в приложение Viber и создайте новый канал
	
	![BF](../../static/img/Docs/Viber/1.png)
	
	2. После создания, перейдите в настройки канала -> Для разработчиков, и скопируйте **Токен**
	
	![BF](../../static/img/Docs/Viber/2.png)
	
	3. Установите Webhook. См. Установить Webhook
	4. **IDПользователя** - ваш ID (администратора канала). См. Получить информацию о канале
	
 <br/>

- Если вам необходим чат-бот:
	1. Перейдите по ссылке [https://partners.viber.com/account/create-bot-account](https://partners.viber.com/account/create-bot-account) и авторизуйтесь с вашим номером телефона, который привязан к Viber
	
	![BF](../../static/img/Docs/Viber/3.png)
	
	2. Выберите пункт создания нового бота
	
	![BF](../../static/img/Docs/Viber/4.png)
	
	3. В меню создания бота заполните все необходимые поля
	
	![BF](../../static/img/Docs/Viber/5.png)
	
	4. Скопируйте **Токен**
	
	![BF](../../static/img/Docs/Viber/6.png)
	
	4. Найти своего нового бота вы можете отсканировав QR на странице создания или в настройках (пункт чат-боты) в приложении Viber. 
	
	![BF](../../static/img/Docs/Viber/7.png)
	
	5. Сейчас вы не можете начать диалог с ботом, сначала необходимо установить Webhook. См. Установить Webhook
	6. После запуска **IDПользователя** будет ID конкретного человека, ведущего диалог с ботом. Получить можно из обработыки входящих сообщения по Webhook


	**Важно:** ID одного и того же пользователя у чата и канала - это разные значения. Нельзя использовать ID, полученный из сообщения боту для вызова методов управления каналом и наоборот