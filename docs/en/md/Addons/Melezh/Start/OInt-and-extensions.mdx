---
id: Extensions
title: Standard library and extensions
sidebar_position: 4
---

This section describes the primary methods for processing incoming requests: using functions from the Open Integration Package (OpenIntegrations) standard library and custom extension functions.

## OpenIntegrations Methods (Standard Library)

As previously mentioned in the documentation, each handler is characterized by a function responsible for generating responses to incoming requests. By default, Melezh includes the complete set of methods from the Open Integration Package libraries - these methods can be selected as processing functions when configuring individual handlers.

When configuring handlers via the command line interface, you can refer to the Open Integration Package documentation for:
- Correct library (command) names
- Function names and their arguments
- Examples of return values that will be included in response bodies

![OpenIntegrations Documentation](../../../../static/img/Docs/Melezh/en/3.png)

:::warning
Library names must be specified in CLI application format. Examples: `telegram` or `gdrive` (Google Drive)
:::

<br/>

When using the web interface, you can select the desired library and function from dropdown menus during handler configuration:

![Web Console](../../../../static/img/Docs/Melezh/en/4.png)

<hr/>

## Extensions

In addition to the standard set of functions from the OpenIntegrations, Melezh can use methods from custom `.os` scripts as handler functions. For their correct interpretation, three conditions must be met:

+ The method must be a function that returns binary data, a string, or a JSON-serializable collection (array, structure, or mapping without non-serializable fields)
+ The script file must have a correct name (no spaces, preferably using Latin characters), `.os` extension, and be placed in the `extensions/Modules` subdirectory of the main Melezh directory

	Windows (default):
	```
	C:\Program Files (x86)\OInt\share\oint\lib\melezh\extensions\Modules
	```

	Linux:
	```
	share/oint/lib/melezh/extensions/Modules
	```

	OneScript, as OPM package:
	```
	<OneScript directory>/lib/melezh/extensions/Modules
	```

+ The method must include a documentation comment in the following format:

	```bsl
	// Method name
	// Method description
	//
	// Parameters:
	//  Field1 - String  - Field 1 value - field1
	//  Field2 - String  - Field 2 value - field2
	//  Field3 - String  - Field 3 value - field3
	//
	// Return:
	//  Structure Of KeyAndValue - Returned value
	```

This is the standard EDT comment format but with three distinctive features: the second line is a brief function description (optional), parameters have a fourth description block - CLI style argument name, the parameter description cannot use the `-` character except as block separators

:::warning
Using `-` in parameter description text will cause an error
:::

<br/>

In the standard distribution, the `extensions/Modules` directory contains a `RequestsEcho.os` module that can be used as an example when creating new extensions:

```bsl title="RequestsEcho.os"

// Fields echo
//
// Parameters:
// Field1 - String - Field 1 value - field1
// Field2 - String - Field 2 value - field2
// Field3 - String - Field 3 value - field3
//
// Returns:
// Structure Of KeyAndValue - Echo
Function FieldsEcho(Val Field1, Val Field2, Val Field3 = "") Export
	Return New Structure("field1,field2,field3", Field1, Field2, Field3);
EndFunction

```

In the Web console selection list, this module will be displayed as follows:

![RequestsEcho](../../../../static/img/Docs/Melezh/en/5.png)

:::important
It is recommended to additionally keep backup copies of extension modules in another location, as these files may be deleted during certain Melezh updates and removals, or when rebuilding the image (if using Docker).
:::

