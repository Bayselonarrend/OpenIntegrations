---
sidebar_position: 3
description: Get request settings and other functions to work with ClickHouse in the Open Integration Package, a free open-source integration library for 1C:Enterprise 8, OneScript and CLI
keywords: [1C, 1ะก, 1ะก:Enterprise, 1ะก:Enterprise 8.3, API, Integration, Services, Exchange, OneScript, CLI, ClickHouse]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Get request settings
 Forms the request description structure



`Function GetRequestSettings(Val Text, Val Database = Undefined, Val RequestID = Undefined, Val Data = Undefined, Val ResponseFormat = "JSON", Val ExternalTables = Undefined, Val Settings = Undefined) Export`

  | Parameter | CLI option | Type | Required | Description |
  |-|-|-|-|-|
  | Text | --query | String | &#x2714; | Request text |
  | Database | --db | String | &#x2716; | Database |
  | RequestID | --id | String | &#x2716; | Unique request ID, if necessary |
  | Data | --data | Arbitrary | &#x2716; | String, file, or binary data of the request |
  | ResponseFormat | --format | String | &#x2716; | Response format: JSON, CSV, TSV, etc.. |
  | ExternalTables | --ext | Array of Structure | &#x2716; | External tables data. See GetExternalTableStructure |
  | Settings | --settings | Map Of KeyAndValue | &#x2716; | Additional query parameters of the request |

  
  Returns:  Structure Of KeyAndValue - Request structure

:::tip
When using the `http` transport, you cannot use `Data` and `External Tables` simultaneously

The response body can be returned as a collection (for JSON) or as binary data (for other formats). In the CLI version, binary data will be represented as a Base64 string
:::
<br/>


```bsl title="1C:Enterprise/OneScript code example"
    // Minimal request

    QueryText = "SELECT 1";

    Result = OPI_ClickHouse.GetRequestSettings(QueryText);

    // Full request

    RequestID      = String(New UUID());
    Data           = New Structure("meta,data", New Array, New Array);
    Database       = "default";
    ResponseFormat = "CSV";

    AdditionalSettings = New Map;
    AdditionalSettings.Insert("max_threads", "4");

    ColoumnsStruct = New Structure("id,name", "UInt64", "String");
    ExternalTable  = OPI_ClickHouse.GetExternalTableStructure("ext", ColoumnsStruct);

    TableArray = New Array;
    TableArray.Add(ExternalTable);

    Result = OPI_ClickHouse.GetRequestSettings(QueryText
        , Database
        , RequestID
        , Data
        , ResponseFormat
        , TableArray
        , AdditionalSettings);
```
 



```json title="Result"
{
 "query": "SELECT 1",
 "database": "default",
 "id": "0ccabb31-5589-49e6-8665-058654bb3749",
 "data": {
  "meta": [],
  "data": []
 },
 "format": "CSV",
 "external_tables": [
  {
   "name": "ext",
   "cols": {
    "id": "UInt64",
    "name": "String"
   }
  }
 ],
 "settings": {
  "max_threads": "4"
 }
}
```
